<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Managing IPv6 Networks &mdash; MAAS dev documentation</title>
    
    <link rel="stylesheet" href="/static/maas-1.9/flasky.css" type="text/css" />
    <link rel="stylesheet" href="/static/maas-1.9/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/guidelines/css/latest/ubuntu-styles.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/ubuntu/latest/u/css/global.css" type="text/css" />
    <link rel="stylesheet" href="/static/maas-1.9/css/main.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="/static/maas-1.9/jquery.js"></script>
    <script type="text/javascript" src="/static/maas-1.9/underscore.js"></script>
    <script type="text/javascript" src="/static/maas-1.9/doctools.js"></script>
    <link rel="shortcut icon" href="/static/maas-1.9/maas.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="MAAS dev documentation" href="index.html" />
    <link rel="next" title="Boot images import configuration" href="bootsources.html" />
    <link rel="prev" title="Static IPs" href="static-ips.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="bootsources.html" title="Boot images import configuration"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="static-ips.html" title="Static IPs"
             accesskey="P">previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://maas.io/docs/">Latest documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
  </li>
  <li class="nav-item nav-item-0">
    <a href="index.html">MAAS dev documentation</a>
  </li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="managing-ipv6-networks">
<span id="ipv6"></span><h1>Managing IPv6 Networks<a class="headerlink" href="ipv6.html#managing-ipv6-networks" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is available in MAAS versions 1.7 and above, starting with
lp:maas revision 2992.  If you&#8217;re writing a client application that makes use
of this feature, you can query the region-server API for the
<code class="docutils literal"><span class="pre">ipv6-deployment-ubuntu</span></code> <a class="reference internal" href="version.html#cap-ipv6-deployment-ubuntu"><span>capability</span></a>.</p>
</div>
<p>MAAS has limited IPv6 support for networking nodes.  It works much like IPv4
support, but with a number of limitations:</p>
<ul class="simple">
<li>Nodes still boot, register, and install using the IPv4 network.</li>
<li>IPv6 addresses are only configured when using the default Ubuntu installer.</li>
<li>Most BMCs can only be controlled (e.g. to power nodes on/off) using IPv4.</li>
<li>MAAS still uses IPv4 for its internal operation, installing nodes, etc.</li>
<li>For now, MAAS only supports IPv6 on networks where it also manages IPv4 DHCP.</li>
<li>A network interface on a node can only be on one IPv6 subnet.</li>
<li>A network interface on a cluster controller can manage only one IPv6 subnet.</li>
</ul>
<p>The web user interface and REST API can be accessed in the same way on both
IPv4 and IPv6.  To use an IPv6 address as the hostname in a URL, in your
browser or elsewhere, surround it with square brackets.  For example, on the
local machine (<code class="docutils literal"><span class="pre">::1</span></code>, the IPv6 equivalent of <code class="docutils literal"><span class="pre">localhost</span></code>) you might
request:</p>
<div class="highlight-python"><div class="highlight"><pre>http://[::1]/MAAS/
</pre></div>
</div>
<p>If your MAAS server has a DNS hostname that resolves to both IPv4 and IPv6
addresses, your browser may already be accessing the UI through IPv6 without
you noticing.</p>
<div class="section" id="enabling-ipv6">
<h2>Enabling IPv6<a class="headerlink" href="ipv6.html#enabling-ipv6" title="Permalink to this headline">¶</a></h2>
<p>You enable IPv6 networking in the same way that you enable IPv4 networking:
configure a separate cluster interface for your IPv6 subnet, in addition to the
one you need for your IPv4 subnet.  The IPv6 cluster interface must define a
static address range.  Provided that you already have a functioning IPv6
network, that&#8217;s all there is to it.  The following sections will go into more
detail about what is supported, what is needed, and what to do if you don&#8217;t yet
have a functioning IPv6 network.</p>
<p>An IPv6 cluster interface can use the same network interface on the cluster
controller as an existing IPv4 network interface.  It just defines a different
subnet, with IPv6 addressing.  A node that&#8217;s connected to the IPv4 subnet will
also be connected to the IPv6 subnet on the same network segment.</p>
<div class="section" id="configuring-your-ipv6-subnet">
<h3>Configuring your IPv6 subnet<a class="headerlink" href="ipv6.html#configuring-your-ipv6-subnet" title="Permalink to this headline">¶</a></h3>
<p>When you configure your IPv6 cluster interface, be sure to define a static IP
address range.  Deployed nodes on the subnet will get static addresses in this
range.</p>
<p>IPv6 networks are normally 64 bits wide, so you can be generous with the
ranges&#8217; sizes.  It also means that you can leave the netmask field blank.</p>
<p>(There are no broadcast addresses in IPv6, so leave the broadcast address field
blank as well.)</p>
<p>You may want MAAS to manage DHCP and DNS, but it&#8217;s not required.  In fact nodes
do not need a DHCP server at all for IPv6; MAAS configures static IPv6
addresses on the node&#8217;s network interfaces while deploying it.  A DHCPv6 server
can provide addresses for containers or virtual machines running on the nodes,
as well as devices on the network that are not managed by MAAS, but it is not
needed for the nodes themselves.  MAAS will not be aware of any addresses
issued by DHCP, and does not guarantee that they will stay unchanged.</p>
</div>
<div class="section" id="routing">
<span id="ipv6-routing"></span><h3>Routing<a class="headerlink" href="ipv6.html#routing" title="Permalink to this headline">¶</a></h3>
<p>In IPv6, clients do not discover routes through DHCP.  Routers make themselves
known on their networks by sending out <em>route advertisements</em>.  These <em>RAs</em>
contain other configuration as well: whether clients should statelessly
configure their own unique IP addresses based on their MAC addresses; whether
they should request stateless configuration from a DHCP server; and finally,
whether they should request a stateful IP address from a DHCP server.  Since a
network interface can have any number of IPv6 addresses even on a single
subnet, several of these address assignment mechanisms can be combined.</p>
<p>However, when MAAS configures IPv6 networking on a node, it does not rely on
RAs.  it statically configures your nodes&#8217; default IPv6 route to use the router
that is configured on the cluster interface, so that the nodes will know their
default gateway.  They do not need DHCP and will not autoconfigure global
addresses.</p>
<p>However, if you are planning to operate DHCPv6 clients as well, e.g. on
machines not managed by MAAS or on virtual machines hosted by MAAS nodes, you
may still want to have RAs configured to make those clients obtain
configuration over DHCP.</p>
<p>If you need RAs but your gateway does not send them, install and configure
<code class="docutils literal"><span class="pre">radvd</span></code> somewhere on the network to advertise its route.</p>
</div>
<div class="section" id="other-installers-and-operating-systems">
<h3>Other installers and operating systems<a class="headerlink" href="ipv6.html#other-installers-and-operating-systems" title="Permalink to this headline">¶</a></h3>
<p>Static IPv6 addresses are currently only configured on Ubuntu, when installed
using the &#8220;fast&#8221; installer.  Other operating systems, or Ubuntu with the
classic Debian installer, will not have their IPv6 addresses configured.
The same applies when a user manually installs an operating system on a node,
or overwrites its networking configuration: the node will no longer have its
static IPv6 address configured, even if MAAS has allocated it to the node.</p>
<p>However, as long as the address remains allocated to the node, you may still
configure its operating system to use that address.  The node can then use that
address as if it had been configured by MAAS.</p>
</div>
</div>
<div class="section" id="disabling-ipv4">
<h2>Disabling IPv4<a class="headerlink" href="ipv6.html#disabling-ipv4" title="Permalink to this headline">¶</a></h2>
<p>For advanced users, there is an experimental capability to deploy nodes with
pure IPv6, with IPv4 networking disabled.  To enable this on a node, check the
&#8220;Disable IPv4 when deployed&#8221; box on the node&#8217;s Edit page.  The process of
managing and deploying the node will still largely work through IPv4, but once
deployed, the node will have IPv6 networking only.</p>
<p>In practice nodes may not be functional without IPv4 networking.  A few things
are known to be needed in any case:</p>
<div class="section" id="configuring-the-maas-url">
<h3>Configuring the MAAS URL<a class="headerlink" href="ipv6.html#configuring-the-maas-url" title="Permalink to this headline">¶</a></h3>
<p>The <em>maas-cluster-controller</em> package has a configuration item for the URL
where nodes and cluster controllers can reach the MAAS region API.</p>
<p>By default, this URL is set based on the region controller&#8217;s IPv4 address.  To
make it work for nodes that won&#8217;t have IP4, you must set the MAAS URL to use
a hostname instead of an IP address.  The hostname must resolve to both IPv4
and IPv6 addresses, and both on the cluster controller and on the nodes.</p>
<p>To change this setting, run:</p>
<div class="highlight-python"><div class="highlight"><pre>dpkg-reconfigure maas-cluster-controller
</pre></div>
</div>
<p>It will prompt you for the URL, with its current setting as the initial value.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<a style="border:0" title="MAAS Documentation Homepage" href="index.html"><img src="/static/maas-1.9/maas-logo-200.png" alt="MAAS logo"/></a>
<h2 style="text-align:center;">MAAS</h2>
<p style="font-style:italic;font-size:0.9em; text-align:center; margin-bottom:1.5em">Metal As A Service.</p>
<span id="version_switcher"></span>
<br/>
<br/>

  <ul>
<li><a class="reference internal" href="ipv6.html#">Managing IPv6 Networks</a><ul>
<li><a class="reference internal" href="ipv6.html#enabling-ipv6">Enabling IPv6</a><ul>
<li><a class="reference internal" href="ipv6.html#configuring-your-ipv6-subnet">Configuring your IPv6 subnet</a></li>
<li><a class="reference internal" href="ipv6.html#routing">Routing</a></li>
<li><a class="reference internal" href="ipv6.html#other-installers-and-operating-systems">Other installers and operating systems</a></li>
</ul>
</li>
<li><a class="reference internal" href="ipv6.html#disabling-ipv4">Disabling IPv4</a><ul>
<li><a class="reference internal" href="ipv6.html#configuring-the-maas-url">Configuring the MAAS URL</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<script type="text/javascript">
$(document).ready(function () {
  if (true) {
    $.ajaxSetup({cache: true});
    $.getScript('/static/maas-1.9/versions.js', function() {
      console.log( "Versions script loaded." );
      set_up_version_switcher('#version_switcher', 'docs');
    });
}
});
</script>

<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="static-ips.html" title="previous chapter">Static IPs</a></li>
      <li>Next: <a href="bootsources.html" title="next chapter">Boot images import configuration</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="/static/maas-1.9/ipv6.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="bootsources.html" title="Boot images import configuration"
             >next</a></li>
        <li class="right" >
          <a href="static-ips.html" title="Static IPs"
             >previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="http://maas.io/docs/">Latest documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
  </li>
  <li class="nav-item nav-item-0">
    <a href="index.html">MAAS dev documentation</a>
  </li>
 
      </ul>
    </div>
<footer class="global clearfix">
  <div class="legal clearfix">
    <p>&copy; Copyright 2012-2015, MAAS Developers. Ubuntu and Canonical are registered trademarks of
      <a href="http://canonical.com">Canonical Ltd</a>.
    </p>
    <p>
      Revision 4595
 (2016-08-24 14:59:26 +0000).
      Documentation generation date: 2016-08-24 16:22:23 +0100.
    </p>
  </div>
</footer>
  </body>
</html>