<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Static IPs &mdash; MAAS 1.9 documentation</title>
    
    <link rel="stylesheet" href="/static/maas-1.9/flasky.css" type="text/css" />
    <link rel="stylesheet" href="/static/maas-1.9/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/guidelines/css/latest/ubuntu-styles.css" type="text/css" />
    <link rel="stylesheet" href="https://assets.ubuntu.com/sites/ubuntu/latest/u/css/global.css" type="text/css" />
    <link rel="stylesheet" href="/static/maas-1.9/css/main.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="/static/maas-1.9/jquery.js"></script>
    <script type="text/javascript" src="/static/maas-1.9/underscore.js"></script>
    <script type="text/javascript" src="/static/maas-1.9/doctools.js"></script>
    <link rel="shortcut icon" href="/static/maas-1.9/maas.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="MAAS 1.9 documentation" href="index.html" />
    <link rel="next" title="Managing IPv6 Networks" href="ipv6.html" />
    <link rel="prev" title="Cluster Configuration" href="cluster-configuration.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="ipv6.html" title="Managing IPv6 Networks"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="cluster-configuration.html" title="Cluster Configuration"
             accesskey="P">previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="/maas/">Latest documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
  </li>
  <li class="nav-item nav-item-0">
    <a href="index.html">MAAS 1.9 documentation</a>
  </li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="static-ips">
<span id="id1"></span><h1>Static IPs<a class="headerlink" href="static-ips.html#static-ips" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is available in MAAS versions 1.6 and above.
If you&#8217;re writing a client application, you can check if MAAS
supports this feature via the web API; see the documentation for the
<code class="docutils literal"><span class="pre">static-ipaddresses</span></code> capability <a class="reference internal" href="version.html#cap-static-ipaddresses"><span>here</span></a>.</p>
</div>
<p>Previously, MAAS relied on the DHCP server to allocate its own IP
addresses to nodes, using the IP range defined on the relevant cluster
interface. This was found to be unreliable since the IPs were only known
once the node had booted and requested an address, and had race conditions
when the lease expired and another machine was looking for its own IP.</p>
<p>MAAS now defines an additional range on the cluster for static IPs that
are allocated by MAAS itself (see <a class="reference internal" href="cluster-configuration.html"><em>Cluster Configuration</em></a> for more
information about this).</p>
<p>In normal operation, MAAS will automatically choose and allocate a static IP to
any node network interfaces where it knows on which cluster interface that node
interface is connected.</p>
<p>The <a class="reference internal" href="api.html"><em>MAAS API</em></a> contains functions to request additional static IPs, which are
summarised here:</p>
<div class="section" id="sticky-ips">
<h2>Sticky IPs<a class="headerlink" href="static-ips.html#sticky-ips" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Synopsis:</dt>
<dd><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/1.0/nodes/{system_id}/</span></code> <code class="docutils literal"><span class="pre">op=claim_sticky_ip_address</span></code></dd>
</dl>
<p>Normally, IPs are released back into the pool of available IPs once a node
is released by a user.  A &#8220;Sticky&#8221; IP is one which is allocated to an interface
on a node that does not change unless the sticky IP is removed.  This enables
more predictable IPs at the cost of wasting IPs when the node is not in use.</p>
</div>
<div class="section" id="unmanaged-user-allocated-ips">
<h2>Unmanaged User-allocated IPs<a class="headerlink" href="static-ips.html#unmanaged-user-allocated-ips" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Synopsis:</dt>
<dd><p class="first"><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/api/1.0/ipaddresses/</span></code></p>
<p><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/1.0/ipaddresses/</span></code> <code class="docutils literal"><span class="pre">op=release</span></code></p>
<p class="last"><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/api/1.0/ipaddresses/</span></code> <code class="docutils literal"><span class="pre">op=reserve</span></code></p>
</dd>
</dl>
<p>This API allows users to request an ad-hoc IP address for use in any way they
see fit.  The IP is not tied to any node in MAAS and is guaranteed not to be
in use by MAAS itself.</p>
<p>See the full <a class="reference internal" href="api.html"><em>MAAS API</em></a> documentation for precise technical details.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<a style="border:0" title="MAAS Documentation Homepage" href="index.html"><img src="/static/maas-1.9/maas-logo-200.png" alt="MAAS logo"/></a>
<h2 style="text-align:center;">MAAS</h2>
<p style="font-style:italic;font-size:0.9em; text-align:center; margin-bottom:1.5em">Metal As A Service.</p>
<span id="version_switcher"></span>
<br/>
<br/>

  <ul>
<li><a class="reference internal" href="static-ips.html#">Static IPs</a><ul>
<li><a class="reference internal" href="static-ips.html#sticky-ips">Sticky IPs</a></li>
<li><a class="reference internal" href="static-ips.html#unmanaged-user-allocated-ips">Unmanaged User-allocated IPs</a></li>
</ul>
</li>
</ul>
<script type="text/javascript">
$(document).ready(function () {
  if (true) {
    $.ajaxSetup({cache: true});
    $.getScript('/static/maas-1.9/versions.js', function() {
      console.log( "Versions script loaded." );
      set_up_version_switcher('#version_switcher', 'docs');
    });
}
});
</script>

<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="cluster-configuration.html" title="previous chapter">Cluster Configuration</a></li>
      <li>Next: <a href="ipv6.html" title="next chapter">Managing IPv6 Networks</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="/static/maas-1.9/static-ips.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="ipv6.html" title="Managing IPv6 Networks"
             >next</a></li>
        <li class="right" >
          <a href="cluster-configuration.html" title="Cluster Configuration"
             >previous</a> |</li>
  <li class="nav-item nav-item-0">
    <a href="/maas/">Latest documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
  </li>
  <li class="nav-item nav-item-0">
    <a href="index.html">MAAS 1.9 documentation</a>
  </li>
 
      </ul>
    </div>
<footer class="global clearfix">
  <div class="legal clearfix">
    <p>&copy; Copyright 2012-2015, MAAS Developers. Ubuntu and Canonical are registered trademarks of
      <a href="http://canonical.com">Canonical Ltd</a>.
    </p>
    <p>
      Revision 4595
 (2016-08-24 14:59:26 +0000).
      Documentation generation date: 2016-08-24 16:22:23 +0100.
    </p>
  </div>
</footer>
  </body>
</html>